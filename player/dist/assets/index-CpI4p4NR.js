var Y=Object.defineProperty;var H=(t,o,e)=>o in t?Y(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var u=(t,o,e)=>H(t,typeof o!="symbol"?o+"":o,e);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class C{constructor(o){u(this,"prog");u(this,"inv");u(this,"room");this.prog=o,this.inv=[],this.room=this.prog.rooms[this.prog.startingRoom]}initialPrintout(){return this.prog.initialPrintout+`

`+this.roomPrintout(this.room)}runUserInput(o){const e=o.toLowerCase().replace(/\s+/g," ").trim().split(" ");if(e.length==0||e[0]=="")return"Huh??";switch(e[0]){case"north":case"n":return e.length>1?"I don't know how to do that. Did you want to say 'north'?":this.tryMove("north");case"east":case"e":return e.length>1?"I don't know how to do that. Did you want to say 'east'?":this.tryMove("east");case"south":case"s":return e.length>1?"I don't know how to do that. Did you want to say 'south'?":this.tryMove("south");case"west":case"w":return e.length>1?"I don't know how to do that. Did you want to say 'west'?":this.tryMove("west");case"up":case"ascend":return e.length>1&&!(e.length==2&&["stairs","ramp","elevator","hill"].includes(e[1]))?"I don't know how to do that. Did you want to say 'up'?":this.tryMove("up");case"down":case"descend":return e.length>1&&!(e.length==2&&["stairs","ramp","elevator","hill"].includes(e[1]))?"I don't know how to do that. Did you want to say 'down'?":this.tryMove("down");case"inventory":case"inv":case"i":case"carrying":case"holding":case"items":return this.inv.length==0?"You're not holding anything.":"You're holding the following items:"+this.inv.map(i=>"- "+this.prog.items[i].short).join("");default:return"I don't know how to '"+e[0]+"'."}}tryMove(o){if(o in this.room.dirs){if(this.room.dirs[o].goto===null)return this.room.dirs[o].say??"You cannot go "+o+".";{const e=this.prog.rooms[this.room.dirs[o].goto],i=("say"in this.room.dirs[o]?this.room.dirs[o].say+`

`:"")+this.roomPrintout(e);return this.room=e,i}}else return"You cannot go "+o+"."}roomPrintout(o){return o.short+`
`+o.printout}}const A="Colossal Carnegie Adventure I",I={mall:{short:"The Mall",printout:"You are standing in front of an open field, facing west toward Hamerschlag Hall. Doherty Hall stands to your north, and Baker Hall to your south.",dirs:{west:{goto:"outsidehh"},north:{goto:"doherty1west"},south:{goto:"baker"},east:{goto:"cfalawn"}}},outsidehh:{short:"Outside Hamerschlag Hall",printout:"You stand facing west, looking up at Hamerschlag Hall. Porter Hall is to your south, and Wean Hall is to your north.",dirs:{west:{goto:"hamerschlag"},south:{goto:"porter"},north:{goto:"laprima"},east:{goto:"mall"}}},doherty1west:{short:"Doherty Hall",printout:"You're inside Doherty Hall. You see grass and cloudy skies through a door to the south. Stairs lead upward.",dirs:{south:{goto:"mall"},up:{goto:"doherty2west"}}},doherty2west:{short:"Doherty Hall",printout:"You're inside Doherty Hall. A staircase is next to you, going both directions. There's a pair of double doors to the west, a lecture hall to your south, and a long corridor to your east.",dirs:{west:{goto:"liminallower"},south:{goto:"dh2315"},east:{goto:"doherty2bridge"},up:{goto:"doherty3west"},down:{goto:"doherty1west"}}},outsidelaprima:{short:"Outside La Prima",printout:"You're outside an imposing brutalist structure, in an outdoor spot on the Mall overlooking Baker-Porter to your south. You see the counter of La Prima through glass doors to your north.",dirs:{south:{goto:"outsidehh"},north:{goto:"laprima"}}},laprima:{short:"La Prima",printout:"You're in a busy coffee shop. You see elevators to your north, and the Mall to your south through some doors.",dirs:{north:{goto:"wean5lobby"},south:{goto:"outsidelaprima"},west:{goto:"laprimacounter"}}},laprimacounter:{short:"La Prima Counter",printout:"You stand up against the counter to La Prima, as people force their way past you to pick up cups of coffee.",dirs:{north:{goto:null,say:'"You try to push your way through, but the crowds are too thick."'},east:{goto:null,say:'"You try to find a gap in the crowds, but the way back is blocked."'},south:{goto:"outsidelaprima"}}},laprimacounteratnite:{short:"La Prima Counter",printout:"You climb over the counter.",dirs:{}},cfalawn:{short:"CFA Lawn",printout:"You're in the middle of a field, with sparse trees around its edges. You see the Mall to your west, punctuated by the tower of Hamerschlag Hall, and opposite the College of Fine Arts to your east. The Fence and the Cut are to your north, and Hunt Library is to your south.",dirs:{west:{goto:"mall"},east:{goto:"cfabuilding"},north:{goto:"thefence"},south:{goto:"outsidehunt"}}},outsidehunt:{short:"Outside Hunt Library",printout:"In front of you, just to your south, stands Hunt Library, with its strange facade. A sidewalk to your east runs alongside the College of Fine Arts, and the CFA Lawn is to your north.",dirs:{south:{goto:"hunt1"},east:{goto:"hunttopeace"},north:{goto:"baker"},west:{goto:"cfalawn"}}},thefence:{short:"The Fence",printout:'You behold the Fence, which is painted with three mysterious letters: "KGB". Lawns sprawl out in all directions, except west, where Doherty Hall stands.',dirs:{west:{goto:"doherty1"},north:{goto:"thecut"},south:{goto:"cfalawn"},east:{goto:"tenniscourts"}}},doherty1:{short:"Doherty Hall",printout:"You're inside Doherty Hall. A door to your east leads outside, and the hall continues west.",dirs:{east:{goto:"thefence"},west:{goto:"doherty1stairs"},south:{goto:"doherty1stairs"},north:{goto:"doherty1cheme"}}},doherty1stairs:{short:"Doherty Hall",printout:"You're inside Doherty Hall. A staircase leads upward, and another leads down to a small pair of double doors with square windows. There's an elevator to your west. A door to the north seems to open into a larger space.",dirs:{west:{goto:"dohertyb2elevator"},north:{goto:"doherty1"},up:{goto:"doherty2"},down:{goto:"dohertyadoors"}}},doherty2:{short:"Doherty Hall",printout:"You're inside Doherty Hall. A staircase is next to you, going both directions. There's a long corridor to your west, and a lecture hall to your south.",dirs:{up:{goto:"doherty3"},down:{goto:"doherty1stairs"},west:{goto:"doherty2bridge"},south:{goto:"dh2210"}}},thecut:{short:"The Cut",printout:"You find yourself on a lawn to the north of the Fence, between it and Walking to the Sky. To your west is the Purnell Center, and to your east is the University Center.",dirs:{north:{goto:"walkingtothesky"},south:{goto:"thefence"},west:{goto:"purnell"},east:{goto:"ucfromthecut"}}},walkingtothesky:{short:"",printout:"You're on the north end of the Cut. You admire a tall steel pole rises into the sky, with statues walking up it, and after a second you realize the other admirers are statues as well. You wonder what Medusean beast was responsible for this.",dirs:{north:{goto:"forbescut"},south:{goto:"thecut"},west:{goto:"warner"},up:{goto:null,say:'"You too try to walk up the pole, but find it far too slippery."'}}},forbescut:{short:"Forbes Ave",printout:"You stand on the sidewalk along Forbes Avenue. Morewood Avenue is to your north, and the Cut is to your south.",dirs:{north:{goto:"morewoodsouth"},south:{goto:"thecut"},east:{goto:"forbesbeeler"},west:{goto:"forbescyert"}}},forbescyert:{short:"Forbes Ave",printout:"You stand on the sidewalk along Forbes Avenue. The Tepper Quad is to your north, and Cyert Hall is to your south.",dirs:{north:{goto:"tepperquad"},south:{goto:"cyert"},east:{goto:"forbescut"},west:{goto:"forbestepper"}}},forbestepper:{short:"Forbes Ave",printout:"You stand on the sidewalk along Forbes Avenue. The Tepper School of Business is to your north, and Hamburg Hall is to your south. You see more of campus to the east.",dirs:{north:{goto:"coulterwc"},south:{goto:"hamburg"},east:{goto:"forbescyert"},west:{goto:"forbesoverneville"}}},morewoodsouth:{short:"Morewood Ave",printout:"You stand on the sidewalk along Morewood Avenue, which runs north-south. Morewood E-Tower and Morewood Gardens are to your west, and the Greek Quad is to your east.",dirs:{west:{goto:"morewoodgardens"},east:{goto:"greekquad"},north:{goto:"morewoodmid"},south:{goto:"forbescut"}}},morewoodmid:{short:"Morewood Ave",printout:"You stand on the sidewalk along Morewood Avenue, which runs north-south. Stever House and Mudge House are to your west. You see a busy street to the north.",dirs:{west:{goto:"stevermudge"},north:{goto:"morewoodfifth"},south:{goto:"morewoodmid"}}},morewoodfifth:{short:"Morewood Ave & Fifth Ave",printout:"You stand at the intersection of Morewood Avenue and Fifth Avenue. You see campus in the distance to the south, and a few residence halls to your west.",dirs:{north:{goto:"morewoodnorth"},south:{goto:"morewoodmid"},west:{goto:"fiftheast"},east:{goto:null,say:'"Construction blocks your path."'}}},morewoodnorth:{short:"Morewood Ave",printout:"You stand on the sidewalk along Morewood Avenue, on a hill which descends to the north. A busy street is to the south.",dirs:{north:{goto:"ellsworth"},west:{goto:"ellsworth"},south:{goto:"morewoodfifth"}}},ellsworth:{short:"Ellsworth Ave",printout:"You decide to turn west onto Ellsworth Avenue.",dirs:{west:{goto:"clyde"},south:{goto:"morewoodnorth"},east:{goto:"morewoodnorth"}}},clyde:{short:"West of Clyde House",printout:"You find yourself outside Clyde House, a small brick building overshadowed by Cathedral Mansions.",dirs:{north:{goto:"northclyde"},south:{goto:"southclyde"},east:{goto:null,say:`"You try the front door, but it's locked."`},west:{goto:"fifthclyde"}}},northclyde:{short:"North of Clyde House",printout:"You are facing the north side of a brick house. There is no door here, although there is a strange window below ground level, visible in a deep gutter.",dirs:{north:{goto:"cathedralmansions"},south:{goto:null,say:'"You try walking south, and fall into the hole. The window is too cloudy to see through, so you clamber out."'},west:{goto:"clyde"},east:{goto:"behindclyde"}}},behindclyde:{short:"Behind Clyde House",printout:"You are behind Clyde House. A questionably constructed wooden ramp leads up to a back door, next to a bike rack. In one corner of the house there is a small window which is slightly ajar. The Fifth and Clyde residence hall is to your south.",dirs:{north:{goto:"northclyde"},south:{goto:"southclyde"},east:{goto:"clydekitchen"},west:{goto:"cathedralmansions"}}},southclyde:{short:"South of Clyde House",printout:"You are facing the south side of a brick house. There is no door here, and the windows are out of reach.",dirs:{north:{goto:null,say:'"The windows are out of reach."'},south:{goto:"fifthclyde"},east:{goto:"fiftheast"},west:{goto:"behindclyde"}}},clydekitchen:{short:"Clyde House Kitchen",printout:"You are in the kitchen of Clyde House. A passage leads to the west and a doorway to a larger space is to your north, through which you can see a grand staircase. A dark chimney leads down and to the east is a small window which is open.",dirs:{north:{goto:"clydecommons"},east:{goto:"behindclyde"},west:{goto:"clydelaundry"},up:{goto:null},down:{goto:null}}},fifthclyde:{short:"",printout:"NOTE unfinished",dirs:{north:{goto:"northclyde"}}}},M="mall",E={initialPrintout:A,rooms:I,startingRoom:M},b=new C(E),v=document.getElementById("history"),h=document.getElementById("input-cont"),y=document.getElementById("input-0"),w=document.getElementById("input-1"),p=document.getElementById("input-c-cont"),L=document.getElementById("input-c"),k=document.getElementById("cursor"),f=document.getElementById("input-2"),r=document.getElementById("input");v.textContent=b.initialPrintout();r.focus();let g=0,a;function m(){k.style.display=g%4<2?"":"none",g++}function d(){if(document.activeElement==r)if(r.selectionStart==r.selectionEnd){const t=r.selectionStart===null?r.value.length:r.selectionStart;y.textContent=r.value.slice(0,t),w.textContent="",p.style.display="",L.textContent=t>=r.value.length?"":r.value.slice(t,t+1),f.textContent=r.value.slice(t+1),a!==void 0&&clearInterval(a),g=0,a=setInterval(m,125),m()}else y.textContent=r.value.slice(0,r.selectionStart),w.textContent=r.value.slice(r.selectionStart,r.selectionEnd),p.style.display="none",f.textContent=r.value.slice(r.selectionEnd)}d();function l(t,o){if(t==h)return o;let e=o;for(const i of t.parentNode.childNodes){if(i==t)break;e+=i.textContent.length}return l(t.parentNode,e)}window.addEventListener("click",()=>{const t=window.getSelection();if(console.log(t),t.isCollapsed)if(h.contains(t.focusNode)){const o=l(t.focusNode,t.focusOffset);r.focus(),r.setSelectionRange(o,o)}else r.focus();else if(h.contains(t.anchorNode)&&h.contains(t.focusNode)){const o=l(t.anchorNode,t.anchorOffset),e=l(t.focusNode,t.focusOffset);r.focus(),r.setSelectionRange(Math.min(o,e),Math.max(o,e))}});r.addEventListener("input",()=>{d()});r.addEventListener("keydown",t=>{if(t.code=="Enter"){const o=b.runUserInput(r.value);v.textContent+=`

>`+r.value+(o?`
`+o:""),r.value="",d()}});r.addEventListener("blur",()=>{k.style.display="none",clearInterval(a),a=void 0});document.addEventListener("selectionchange",()=>{d()});
